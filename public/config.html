<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MMM-RTSPStream Configuration Builder</title>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>MMM-RTSPStream Configuration Builder</h1>
        <p>Create your RTSP stream configuration with ease</p>
      </div>

      <form class="form">
        <div class="section">
          <div class="section-header">
            <h2 class="section-title">Step 1. Core Configuration</h2>
          </div>
          <div class="section-content">
            
            <div class="form-group">
              <label class="label" for="position">Module Position</label>
              <div>
                <select id="position" name="position" class="select">
                  <option value="top_bar">top_bar</option>
                  <option value="top_left">top_left</option>
                  <option value="top_center">top_center</option>
                  <option value="top_right">top_right</option>
                  <option value="upper_third">upper_third</option>
                  <option value="middle_center" selected>middle_center</option>
                  <option value="lower_third">lower_third</option>
                  <option value="bottom_left">bottom_left</option>
                  <option value="bottom_center">bottom_center</option>
                  <option value="bottom_right">bottom_right</option>
                  <option value="bottom_bar">bottom_bar</option>
                  <option value="fullscreen_above">fullscreen_above</option>
                  <option value="fullscreen_below">fullscreen_below</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label class="label" for="headerText">Module Header Text</label>
              <div>
                <input
                  id="headerText"
                  name="headerText"
                  type="text"
                  placeholder="Camera Streams"
                  class="input"
                />
                <div class="help">Leave blank for no header.</div>
              </div>
            </div>

            <div class="form-group">
              <label class="label">Auto Start Streams?</label>
              <div>
                <div class="radio-group">
                  <label class="radio-item" for="autoStart-0">
                    <input type="radio" name="autoStart" id="autoStart-0" value="true" checked />
                    Yes
                  </label>
                  <label class="radio-item" for="autoStart-1">
                    <input type="radio" name="autoStart" id="autoStart-1" value="false" />
                    No
                  </label>
                </div>
                <div class="help">
                  Yes will start the streams automatically when the mirror starts,
                  no will show snapshots (if available) or a blank window until the
                  stream is started by a notification from another app or by
                  clicking the play button.
                </div>
              </div>
            </div>

            <div class="form-group">
              <label class="label">Rotate Through Streams or Individual Windows?</label>
              <div>
                <div class="radio-block">
                  <label for="rotateStreams-0">
                    <input type="radio" name="rotateStreams" id="rotateStreams-0" value="true" checked />
                    Rotate through all streams in a single window
                  </label>
                </div>
                <div class="radio-block">
                  <label for="rotateStreams-1">
                    <input type="radio" name="rotateStreams" id="rotateStreams-1" value="false" />
                    Display an individual window for each stream
                  </label>
                </div>
              </div>
            </div>

            <div class="form-group rotateStreamTimeout">
              <label class="label" for="rotateStreamTimeout">Time (in sec) to show each stream</label>
              <div>
                <input
                  id="rotateStreamTimeout"
                  name="rotateStreamTimeout"
                  type="text"
                  placeholder="10"
                  value="10"
                  class="input"
                />
                <div class="help">Only applies when the first option above is selected.</div>
              </div>
            </div>

            <div class="form-group">
              <label class="label">Show snapshot images when the stream(s) is paused</label>
              <div>
                <div class="radio-group">
                  <label class="radio-item" for="showSnapWhenPaused-0">
                    <input type="radio" name="showSnapWhenPaused" id="showSnapWhenPaused-0" value="true" checked />
                    Yes
                  </label>
                  <label class="radio-item" for="showSnapWhenPaused-1">
                    <input type="radio" name="showSnapWhenPaused" id="showSnapWhenPaused-1" value="false" />
                    No
                  </label>
                </div>
                <div class="help">
                  If your camera supports timed snapshot images via URL or saving to
                  a file location, the module can display these when the stream is
                  paused.
                </div>
              </div>
            </div>

            <div class="form-group">
              <label class="label" for="localPlayer">Local Screen Player to Use</label>
              <div>
                <select id="localPlayer" name="localPlayer" class="select">
                  <option value="vlc">VLC Player (HW-accelerated)</option>
                  <option value="ffmpeg">FFMPEG (SW decoder)</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label class="label" for="remotePlayer">Remote Browser/VNC Player to Use</label>
              <div>
                <select id="remotePlayer" name="remotePlayer" class="select">
                  <option value="none">None / N/A</option>
                  <option value="ffmpeg">FFMPEG</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label class="label">Show Snapshots on Remote?</label>
              <div>
                <div class="radio-group">
                  <label class="radio-item" for="remoteSnaps-0">
                    <input type="radio" name="remoteSnaps" id="remoteSnaps-0" value="true" checked />
                    Yes
                  </label>
                  <label class="radio-item" for="remoteSnaps-1">
                    <input type="radio" name="remoteSnaps" id="remoteSnaps-1" value="false" />
                    No
                  </label>
                </div>
                <div class="help">
                  When using VLC for local player and None for remote player,
                  no video will be visible if you open the Mirror on a remote web
                  browser or view through VNC. Selecting yes for this option will
                  show snapshots to the remote viewers (saves resources over using
                  FFMPEG for Remote Player)
                </div>
              </div>
            </div>

            <div class="form-group">
              <label class="label" for="moduleWidth">Module Width</label>
              <div>
                <div class="input-group">
                  <input id="moduleWidth" name="moduleWidth" class="input" placeholder="354" value="354" type="text" />
                  <span class="addon">px</span>
                </div>
                <div class="help">
                  When rotateStreams is false and multiple streams are used, adjust
                  this value to adjust the number of streams shown side by side.
                  E.G. to show 2 streams side by side, this value should be =
                  2*(Stream Width + 2*1px (border) + 2*15px (margin))
                </div>
              </div>
            </div>

            <div class="form-group">
              <label class="label" for="moduleHeight">Module Height</label>
              <div>
                <div class="input-group">
                  <input id="moduleHeight" name="moduleHeight" class="input" placeholder="240" value="240" type="text" />
                  <span class="addon">px</span>
                </div>
                <div class="help">
                  Similar (but less critical) to moduleWidth. Adjust to the number
                  of streams high to ensure other modules clear.
                </div>
              </div>
            </div>

            <div class="form-group vlc">
              <label class="label" for="moduleOffset">Module Offset - Only applies when using VLC</label>
              <div>
                <textarea class="textarea" id="moduleOffset" name="moduleOffset" rows="3"></textarea>
                <div class="help">
                  On some displays, the video does not properly line up with the box
                  on the screen. Entering a pixel value will shift the video over by
                  that amount. Default: 0 Values: Any number (no units) by itself
                  will adjust both top/left the same amount, or you can specify left
                  & top adjustments separately (e.g. { left: 10, top: -10 })
                </div>
              </div>
            </div>

            <div class="form-group ffmpeg">
              <label class="label" for="s1shutdownDelay">Shutdown Delay</label>
              <div>
                <div class="input-group">
                  <input id="s1shutdownDelay" name="s1shutdownDelay" class="input" placeholder="12" value="12" type="text" />
                  <span class="addon">ms</span>
                </div>
                <div class="help">
                  The time delay (in sec) between when the stream is hidden/closed
                  and when the stream actually stops. When rotating through multiple
                  streams this prevents closing the connection to a stream only to
                  re-open a few seconds later when it comes back through the loop
                  (which reduces the time delay when restarting a stream). To
                  conserve resources on a slow device, you can set this to 0
                </div>
              </div>
            </div>

          </div>
        </div>

        <div class="section">
          <div class="section-header">
            <h2 class="section-title">Step 2. Video Stream Configurations</h2>
          </div>
          <div class="section-content">
            
            <div class="form-group count-1">
              <label class="label">Number of Streams</label>
              <div>
                <div class="radio-group">
                  <label class="radio-item" for="streamCount-0">
                    <input type="radio" name="streamCount" id="streamCount-0" value="1" checked />
                    1
                  </label>
                  <label class="radio-item" for="streamCount-1">
                    <input type="radio" name="streamCount" id="streamCount-1" value="2" />
                    2
                  </label>
                  <label class="radio-item" for="streamCount-2">
                    <input type="radio" name="streamCount" id="streamCount-2" value="3" />
                    3
                  </label>
                  <label class="radio-item" for="streamCount-3">
                    <input type="radio" name="streamCount" id="streamCount-3" value="4" />
                    4
                  </label>
                </div>
              </div>
            </div>

            <!-- Stream 1 Configuration -->
            <div class="form-group count-1">
              <label class="label" for="s1Name">Stream #1 Name</label>
              <div>
                <input id="s1Name" name="s1Name" type="text" placeholder="Camera 1" class="input" />
                <div class="help">Enter the name for the camera</div>
              </div>
            </div>

            <div class="form-group count-1">
              <label class="label" for="s1url">Feed #1 URL</label>
              <div>
                <input id="s1url" name="s1url" type="text" placeholder="rtsp://184.72.239.149/vod/mp4:BigBuckBunny_115k.mov" class="input" />
                <div class="help">
                  The url of the RTSP stream. See
                  <a href="https://github.com/shbatm/MMM-RTSPStream/wiki/Stream-URLs-for-Various-Cameras">this list</a>
                  for paths for some common security cameras. Username and password should be passed in
                  the url if required: rtsp://username:password@hostname:port/path
                </div>
              </div>
            </div>

            <!-- Stream 2 Configuration -->
            <div class="form-group count-2 hidden">
              <label class="label" for="s2Name">Stream #2 Name</label>
              <div>
                <input id="s2Name" name="s2Name" type="text" placeholder="Camera 2" class="input" />
                <div class="help">Enter the name for the camera</div>
              </div>
            </div>

            <div class="form-group count-2 hidden">
              <label class="label" for="s2url">Feed #2 URL</label>
              <div>
                <input id="s2url" name="s2url" type="text" placeholder="rtsp://your-camera-url" class="input" />
                <div class="help">
                  The url of the RTSP stream for camera 2
                </div>
              </div>
            </div>

            <!-- Stream 3 Configuration -->
            <div class="form-group count-3 hidden">
              <label class="label" for="s3Name">Stream #3 Name</label>
              <div>
                <input id="s3Name" name="s3Name" type="text" placeholder="Camera 3" class="input" />
                <div class="help">Enter the name for the camera</div>
              </div>
            </div>

            <div class="form-group count-3 hidden">
              <label class="label" for="s3url">Feed #3 URL</label>
              <div>
                <input id="s3url" name="s3url" type="text" placeholder="rtsp://your-camera-url" class="input" />
                <div class="help">
                  The url of the RTSP stream for camera 3
                </div>
              </div>
            </div>

            <!-- Stream 4 Configuration -->
            <div class="form-group count-4 hidden">
              <label class="label" for="s4Name">Stream #4 Name</label>
              <div>
                <input id="s4Name" name="s4Name" type="text" placeholder="Camera 4" class="input" />
                <div class="help">Enter the name for the camera</div>
              </div>
            </div>

            <div class="form-group count-4 hidden">
              <label class="label" for="s4url">Feed #4 URL</label>
              <div>
                <input id="s4url" name="s4url" type="text" placeholder="rtsp://your-camera-url" class="input" />
                <div class="help">
                  The url of the RTSP stream for camera 4
                </div>
              </div>
            </div>

          </div>
        </div>

        <div class="section">
          <div class="section-header">
            <h2 class="section-title">Step 3. Copy to MagicMirror Configuration File</h2>
          </div>
          <div class="section-content">
            
            <div class="form-group">
              <label class="label" for="generate">Generate Config File</label>
              <div>
                <input type="button" id="generate" name="generate" class="btn" value="Generate Configuration" />
              </div>
            </div>

            <div class="form-group">
              <label class="label" for="configResult">Configuration</label>
              <div>
                <textarea class="config-result" id="configResult" name="configResult">Click Generate button above</textarea>
                <div style="display: flex; gap: 1rem; align-items: center; margin-top: 0.5rem;">
                  <div class="help">Copy the above section to your configuration file.</div>
                  <button type="button" id="copyButton" class="btn" style="padding: 0.5rem 1rem; font-size: 0.85rem;">ðŸ“‹ Copy to Clipboard</button>
                </div>
              </div>
            </div>

          </div>
        </div>
      </form>
    </div>

    <script type="module" src="script.js"></script>
  </body>
</html>
